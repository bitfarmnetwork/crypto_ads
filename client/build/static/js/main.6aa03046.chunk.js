(window["webpackJsonpreact-basic-app"]=window["webpackJsonpreact-basic-app"]||[]).push([[0],{373:function(e,t,a){e.exports=a(814)},378:function(e,t,a){},387:function(e,t,a){},513:function(e,t){},534:function(e,t){},536:function(e,t){},573:function(e,t){},575:function(e,t){},606:function(e,t){},653:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=653},699:function(e,t){},701:function(e,t){},709:function(e,t){},711:function(e,t){},718:function(e,t){},720:function(e,t){},723:function(e,t){},737:function(e,t){},739:function(e,t){},809:function(e,t,a){},811:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=811},814:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(70),l=a.n(c),s=(a(378),a(362)),i=a(62),o=a(14),u=a.n(o),p=a(30),h=a(31),d=a(32),m=a(33),f=a(34),v=a(35),y=a(353),b=a.n(y),E=a(822),g=a(815),w=a(71),k=a(147),O=(a(387),k.ethers.getDefaultProvider("ropsten")),x=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={accountEmpty:!0,adWallet:k.ethers.Wallet.createRandom(),linksSubmitted:!1,timeSinceDeposit:0},a.submitButton=function(){console.log("send links to db"),a.setState({linksSubmitted:!0})},a.downloadQR=function(){var e=document.getElementById("123456").toDataURL("image/png").replace("image/png","image/octet-stream"),t=document.createElement("a");t.href=e,t.download="123456.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval((function(){return e.tick()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new k.ethers.Wallet(this.state.adWallet.privateKey,O),e.next=3,t.getBalance();case 3:e.sent.isZero()||(this.state.timeSinceDeposit<3?this.setState({accountEmpty:!1,timeSinceDeposit:this.state.timeSinceDeposit+1}):(console.log(this.state.timeSinceDeposit),clearInterval(this.timerID)));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.linksSubmitted?this.state.accountEmpty?r.a.createElement("div",{className:"Campaign"},r.a.createElement("div",null,r.a.createElement("h2",null,"Step2: Deposit Ether in Your New Ad Account")),r.a.createElement("div",null,r.a.createElement("h3",null,"Send to this Address")),r.a.createElement("div",null,r.a.createElement("h3",null," ",this.state.adWallet.address)),r.a.createElement("div",null,r.a.createElement(w.a.Group,{size:"huge"},r.a.createElement(w.a,{loading:!0,size:"big",name:"circle notch"}),r.a.createElement(w.a,{name:"download"})),r.a.createElement("h4",null,"Awaiting Deposit"))):r.a.createElement("div",{className:"Campaign"},r.a.createElement("div",null,r.a.createElement("h1",null," Success! Your add campaign is live! ")),r.a.createElement("div",null,r.a.createElement("h3",null," Users can scan the QR code below to view your ads and recieve crypto as paymet. ")),r.a.createElement("div",null,r.a.createElement("h3",null," Put this code on flyers, tshirts, buillbords ect! ")),r.a.createElement("div",null,r.a.createElement(b.a,{id:"123456",value:"https://cryptoads-77142.firebaseapp.com/page1/?adWalletAddress="+this.state.adWallet.address,size:290,level:"H",includeMargin:!0})),r.a.createElement("div",null,r.a.createElement("a",{onClick:this.downloadQR}," Download QR "))):r.a.createElement("div",{className:"Campaign"},r.a.createElement("div",null,r.a.createElement("h1",null," Create a New Ad Campaign ")),r.a.createElement("div",null,r.a.createElement("h2",null,"Step1: Paste Links to Video Ads Below")),r.a.createElement("div",null,r.a.createElement(E.a,{focus:!0,placeholder:"Youtube or Vimeo Video Link "})),r.a.createElement("div",null,r.a.createElement(E.a,{focus:!0,placeholder:"Youtube or Vimeo Video Link "})),r.a.createElement("div",null,r.a.createElement(E.a,{focus:!0,placeholder:"Youtube or Vimeo Video Link "})),r.a.createElement("div",null,r.a.createElement(g.a,{onClick:this.submitButton,content:"Submit Links",primary:!0})))}}]),t}(r.a.Component),S=a(207),j=a.n(S),C=a(360),B=a.n(C),P={web3:new j.a,setweb3:function(e){var t=new j.a(e);P.web3=t,sessionStorage.setItem("pageUsingTorus",!0)},initialize:function(){var e=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new B.a,e.next=3,t.init();case 3:return e.next=5,t.login();case 5:P.setweb3(t.provider);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},D=P,N=a(208),A=a.n(N),I=a(824),W=a(825),q=a(823),T=a(361),z=a.n(T),L=(a(809),["https://vimeo.com/265363100"]),R=Math.floor(Math.random()*L.length);function M(e){return r.a.createElement("div",{style:{backgroundColor:"#282c34",height:100,textAlign:"center"}},r.a.createElement("h2",{style:{padding:40,color:"white",fontSize:34}},e.title))}var U=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={account:"",balance:"",videoPlayed:!1,active:!1,apiResponse:""},a.handleShow=function(){return a.setState({active:!0})},a.handleHide=function(){return a.setState({active:!1})},a.setStateInfo=function(){D.web3.eth.getAccounts().then((function(e){a.setState({account:e[0]}),D.web3.eth.getBalance(e[0]).then((function(e){a.setState({balance:e}),a.state.videoPlayed&&a.callAPI()}))}))},a.enableTorus=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.handleShow(),e.prev=1,e.next=4,D.initialize();case 4:a.setStateInfo(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=z.a.parse(this.props.location.search);console.log("adWalletAddress"),console.log(t.adWalletAddress),sessionStorage.getItem("pageUsingTorus")&&D.initialize().then((function(){e.setStateInfo()}))}},{key:"callAPI",value:function(){var e=this,t="http://localhost:9000/payoutAPI/"+this.state.account;fetch(t).then((function(e){return e.text()})).then((function(t){return e.setState({apiResponse:t})})).then((function(t){return console.log(e.state.apiResponse)})).then((function(){"Success"===e.state.apiResponse&&e.props.history.push("/page2/")}))}},{key:"render",value:function(){var e=this,t=this.state.active;return this.state.videoPlayed?r.a.createElement("div",null,r.a.createElement(I.a.Dimmable,{as:W.a,blurring:!0,dimmed:t,style:{padding:0}},r.a.createElement(M,{title:"Thanks for Watching!"}),r.a.createElement(A.a,{url:L[R],width:"100%",style:{pointeEvents:"none"}}),r.a.createElement("div",{style:{padding:40,backgroundColor:"#282c34",height:150,textAlign:"center"}},r.a.createElement(g.a,{color:"violet",size:"huge",onClick:this.enableTorus},"Get Payout with Tourus!"))),r.a.createElement(I.a,{active:this.state.active},r.a.createElement(q.a,{inverted:!0},"Loading"))):r.a.createElement("div",null,r.a.createElement(M,{title:"Play Video to Earn $"}),r.a.createElement(A.a,{url:L[R],playing:!0,width:"100%",onEnded:function(){console.log("onEnded"),e.setState({videoPlayed:!0})},className:"Player"}),r.a.createElement("div",{style:{backgroundColor:"#282c34",height:150,textAlign:"center"}}))}}]),t}(r.a.Component),F=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={account:"",balance:""},a.handleClick1=function(){a.props.history.push("/")},a.handleClick2=function(){a.props.history.push("/page3/")},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{style:{backgroundColor:"#282c34",height:100,textAlign:"center"}},r.a.createElement("h2",{style:{padding:40,color:"white",fontSize:34}},"Congrats!"),r.a.createElement("h2",{style:{padding:40,fontSize:30}},"$0.10 in ETH has been added to your account"),r.a.createElement("div",{style:{padding:40}},r.a.createElement(g.a,{style:{width:"50%"},color:"violet",size:"huge",onClick:this.handleClick1},"Watch More Videos !")),r.a.createElement("div",{style:{padding:40}},r.a.createElement(g.a,{style:{width:"50%"},color:"violet",size:"huge",onClick:this.handleClick2},"Use $$ To Play Games!")))}}]),t}(r.a.Component),V=a(365),G=a(44);function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(a,!0).forEach((function(t){Object(G.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q="1";function $(e){return r.a.createElement("button",{className:"square",onClick:e.onClick},e.value)}var _=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"renderSquare",value:function(e){var t=this;return r.a.createElement($,{value:this.props.squares[e],onClick:function(){return t.props.onClick(e)}})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"board-row"},this.renderSquare(0),this.renderSquare(1),this.renderSquare(2)),r.a.createElement("div",{className:"board-row"},this.renderSquare(3),this.renderSquare(4),this.renderSquare(5)),r.a.createElement("div",{className:"board-row"},this.renderSquare(6),this.renderSquare(7),this.renderSquare(8)))}}]),t}(r.a.Component);function H(){return(H=Object(p.a)(u.a.mark((function e(t,a,n,r,c){var l,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.openEthChannel(t,t);case 3:return l=e.sent,e.next=6,r.openEthChannel(t,t);case 6:s=e.sent,console.log("channel id 1:",l,"channel id 2:",s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Error with prepping channel:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function J(e,t,a){return K.apply(this,arguments)}function K(){return(K=Object(p.a)(u.a.mark((function e(t,a,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.sendEth(n,a);case 3:console.log("Sent",n,"wei to",a),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("error sending eth:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Z(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(p.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.withdrawEth(a);case 3:console.log("Eth withdrawn!"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error with withdrawing eth",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function te(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(p.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getEthBalance();case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.log("Error getting balance:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ne(e,t){return re.apply(this,arguments)}function re(){return(re=Object(p.a)(u.a.mark((function e(t,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Depositing",a,"wei"),e.next=4,t.depositEth(a);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error depositing eth:",e.t0);case 9:console.log("Deposited eth");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ce(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],a=0;a<t.length;a++){var n=Object(V.a)(t[a],3),r=n[0],c=n[1],l=n[2];if(e[r]&&e[r]===e[c]&&e[r]===e[l])return e[r]}return null}var le=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleWinner=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,r,c,l,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c="1","X"!==t){e.next=6;break}n=a.state.player1,r=a.state.address2,e.next=12;break;case 6:if("O"!==t){e.next=11;break}n=a.state.player2,r=a.state.address1,e.next=12;break;case 11:throw"IMPOSSIBLE";case 12:return e.next=14,J(n,r,c);case 14:return e.next=16,te(a.props.player1);case 16:return l=e.sent,e.next=19,te(a.props.player2);case 19:s=e.sent,a.setState(Y({},a.state,{player1Balance:l,player2Balance:s})),console.log("balances:",l,s),console.log("Pay sent to player","X"==t?1:2);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),console.log("Props:",e),function(e,t,a,n,r){H.apply(this,arguments)}(Q,e.player1,e.address1,e.player2,e.address2),a.state={history:[{squares:Array(9).fill(null)}],stepNumber:0,xIsNext:!0,player1:e.player1,player2:e.player2,address1:e.address1,address2:e.address2,selectedPlayer:1},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(this.props.player1);case 2:return t=e.sent,e.next=5,te(this.props.player2);case 5:a=e.sent,this.setState(Y({},this.state,{player1Balance:t,player2Balance:a}));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleClick",value:function(e){console.log("this:",this.state,this.state.player1Balance.freeBalance);var t=this.state.history.slice(0,this.state.stepNumber+1),a=t[t.length-1].squares.slice();if(!ce(a)&&!a[e]){var n=this.state.xIsNext?"X":"O";a[e]=n,ce(a)&&this.handleWinner(n),this.setState({history:t.concat([{squares:a}]),stepNumber:t.length,xIsNext:!this.state.xIsNext})}}},{key:"jumpTo",value:function(e){this.setState({stepNumber:e,xIsNext:e%2===0})}},{key:"render",value:function(){var e,t=this,a=function(){var e=Object(p.a)(u.a.mark((function e(a){var n,r,c,l,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=t.state.selectedPlayer,r=t.state.ethDepositAmount,isNaN(r)?alert("Please specify an integer"):r<=0&&alert("Please specify positive amount"),1===n||2===n){e.next=6;break}throw"Impossible!";case 6:return c=1===n?t.props.player1:t.props.player2,console.log("AWAITING"),e.next=10,ne(c,r);case 10:return console.log("AWAITED"),e.next=13,te(c);case 13:l=e.sent,s="player"+n+"Balance",t.setState(Y({},t.state,Object(G.a)({},s,l))),console.log("Finished depositing Eth for player",n);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(p.a)(u.a.mark((function e(a){var n,r,c,l,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=t.state.selectedPlayer,r=t.state.ethWithdrawAmount,isNaN(r)?alert("Please specify an integer"):r<=0&&alert("Please specify positive amount"),1===n||2===n){e.next=6;break}throw"Impossible!";case 6:return c=1===n?t.props.player1:t.props.player2,e.next=9,Z(c,r);case 9:return e.next=11,te(c);case 11:l=e.sent,s="player"+n+"Balance",t.setState(Y({},t.state,Object(G.a)({},s,l))),console.log("Finished withdrawing Eth for player",n);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=this.state.history,l=c[this.state.stepNumber],s=ce(l.squares);c.map((function(e,a){var n=a?"Go to move #"+a:"Go to game start";return r.a.createElement("li",{key:a},r.a.createElement("button",{onClick:function(){return t.jumpTo(a)}},n))}));return e=s?"Winner: "+s+". Sending eth to "+s:"Next player: "+(this.state.xIsNext?"X":"O"),r.a.createElement("div",{className:"game"},r.a.createElement("div",{className:"game-board"},r.a.createElement(_,{squares:l.squares,onClick:function(e){return t.handleClick(e)}})),r.a.createElement("div",{className:"game-info"},r.a.createElement("div",null,e)),r.a.createElement("form",{onSubmit:a},r.a.createElement("label",null,"Deposit Eth",r.a.createElement("input",{type:"text",value:this.state.value,onChange:function(e){var a=e.target.value;t.setState(Y({},t.state,{ethDepositAmount:a}))}})),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:n},r.a.createElement("label",null,"Withdraw Eth",r.a.createElement("input",{type:"text",onChange:function(e){var a=e.target.value;t.setState(Y({},t.state,{ethWithdrawAmount:a}))}})),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("br",null),r.a.createElement("div",{onChange:function(e){var a;if("Player 1"===e.target.value)a=1;else{if("Player 2"!==e.target.value)throw"WTF";a=2}t.setState(Y({},t.state,{selectedPlayer:a}))}},r.a.createElement("input",{defaultChecked:!0,type:"radio",value:"Player 1",name:"player"})," Player 1",r.a.createElement("input",{type:"radio",value:"Player 2",name:"player"})," Player 2"),r.a.createElement("br",null),r.a.createElement("div",null,"X is player 1"),"Player 1 Address: ",this.state.address1,r.a.createElement("div",null,"Free Balance: ",this.state.player1Balance&&this.state.player1Balance.freeBalance,r.a.createElement("br",null),"Locked Balance: ",this.state.player1Balance&&this.state.player1Balance.lockedBalance,r.a.createElement("br",null),"Receiving Capacity: ",this.state.player1Balance&&this.state.player1Balance.receivingCapacity),r.a.createElement("br",null),r.a.createElement("div",null,"O is player 2"),"Player 2 Address: ",this.state.address2,r.a.createElement("div",null,"Free Balance: ",this.state.player2Balance&&this.state.player2Balance.freeBalance,r.a.createElement("br",null),"Locked Balance: ",this.state.player2Balance&&this.state.player2Balance.lockedBalance,r.a.createElement("br",null),"Receiving Capacity: ",this.state.player2Balance&&this.state.player2Balance.receivingCapacity))}}]),t}(r.a.Component),se=a(810),ie=new se.Client("http://localhost:29979"),oe=new se.Client("http://localhost:29980"),ue=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{padding:40}},r.a.createElement(le,{player1:ie,player2:oe,address1:"0xFdd84739339221cd7cDae571CcCBB58f96a899f1",address2:"0x44f6e43Fb204A43fC4532b0B981ca34426B259E2"}))}}]),t}(r.a.Component);var pe=function(){return r.a.createElement(s.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(i.a,{path:"/",exact:!0,component:x}),r.a.createElement(i.a,{path:"/page1/",component:U}),r.a.createElement(i.a,{path:"/page2/",component:F}),r.a.createElement(i.a,{path:"/page3/",component:ue})))};a(813);l.a.render(r.a.createElement(pe,null),document.getElementById("root"))}},[[373,1,2]]]);
//# sourceMappingURL=main.6aa03046.chunk.js.map